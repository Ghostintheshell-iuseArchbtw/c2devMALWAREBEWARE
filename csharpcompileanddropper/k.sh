#!/bin/bash

# Define package directory and files
PACKAGE_DIR="dropper_package"
FINAL_EXEC="build/final_dropper"
PAYLOAD_ZIP="build/payload.zip"
README="README.txt"
DEPLOY_SCRIPT="deploy.sh"

# Create package directory
mkdir -p "$PACKAGE_DIR"

# Copy final dropper executable
cp "$FINAL_EXEC" "$PACKAGE_DIR/"

# Copy payload.zip
cp "$PAYLOAD_ZIP" "$PACKAGE_DIR/"

# Optionally copy README and deploy script
if [ -f "$README" ]; then
    cp "$README" "$PACKAGE_DIR/"
fi

if [ -f "$DEPLOY_SCRIPT" ]; then
    cp "$DEPLOY_SCRIPT" "$PACKAGE_DIR/"
fi

# Change to package directory and create a ZIP archive
cd "$PACKAGE_DIR" || exit
zip -r "dropper_package.zip" .

# Cleanup
cd ..
rm -rf "$PACKAGE_DIR"

echo "Packaging complete. The dropper package is available as dropper_package/dropper_package.zip."

