#include <iostream>                                                                                                                    
#include <fstream>                                                                                                                     
#include <windows.h>                                                                                                                   
                                                                                                                                       
int main() {                                                                                                                           
    // Obtain a handle to the target process
    HANDLE process = OpenProcess(PROCESS_ALL_ACCESS, FALSE, ...);

    // Allocate memory for the payload
    LPVOID payload = VirtualAllocEx(process, NULL, 0x1000, MEM_RESERVE | MEM_COMMIT, PAGE_EXECUTE_READWRITE);

    // Write the payload to the allocated memory
    DWORD bytesWritten;
    WriteProcessMemory(process, payload, ..., sizeof(...), &bytesWritten);

    // Create a remote thread to execute the payload
    HANDLE thread = CreateRemoteThread(process, NULL, 0, (LPTHREAD_START_ROUTINE)payload, NULL);

    // Wait for the thread to complete
    WaitForSingleObject(thread, INFINITE);

    // Close the remote thread handle
    CloseHandle(thread);

    // Close the process handle
    CloseHandle(process);

    return 0;
}

